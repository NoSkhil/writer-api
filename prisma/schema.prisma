generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model users {
  id                  String     @id @unique @default(cuid())
  first_name          String
  last_name           String
  email               String
  phone_number        BigInt?
  profile_picture_url String?
  created_date        DateTime   @default(now())
  updated_date        DateTime   @default(now()) @updatedAt
  threads             threads[]
  messages            messages[]
}

model threads {
  id           String     @id @unique @default(cuid())
  created_date DateTime   @default(now())
  user         users      @relation(fields: [usersId], references: [id])
  usersId      String
  messages     messages[]
}

model messages {
  id           String   @id @unique @default(cuid())
  created_date DateTime @default(now())
  role         role
  content      Json
  thread       threads  @relation(fields: [threadsId], references: [id])
  user         users    @relation(fields: [usersId], references: [id])
  threadsId    String
  usersId      String
}

model logs {
  id           String   @id @unique @default(cuid())
  type         log_type
  content      Json
  created_date DateTime @default(now())
}

model temp_threads {
  id            String          @id @unique @default(cuid())
  created_date  DateTime        @default(now())
  temp_user     String
  temp_messages temp_messages[]
}

model temp_messages {
  id             String       @id @unique @default(cuid())
  role           role
  content        Json
  created_date   DateTime     @default(now())
  temp_thread    temp_threads @relation(fields: [temp_threadsId], references: [id])
  temp_user      String
  temp_threadsId String
}

enum role {
  user
  assistant
}

enum log_type {
  error
  user_action
  account_creation
}